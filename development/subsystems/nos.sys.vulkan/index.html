
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../../process/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.36">
    
    
      
        <title>nos.sys.vulkan - Nodos Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.06209087.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#vulkan-subsystem" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Nodos Docs" class="md-header__button md-logo" aria-label="Nodos Docs" data-md-component="logo">
      
  <img src="https://avatars.githubusercontent.com/u/95688674?s=400&u=dbda967bb1f34e1f65123a93699169ea4762bdf2&v=4" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Nodos Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              nos.sys.vulkan
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Nodos Docs" class="md-nav__button md-logo" aria-label="Nodos Docs" data-md-component="logo">
      
  <img src="https://avatars.githubusercontent.com/u/95688674?s=400&u=dbda967bb1f34e1f65123a93699169ea4762bdf2&v=4" alt="logo">

    </a>
    Nodos Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Development for Nodos
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Development for Nodos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../plugins/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Plugins
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Plugins
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Subsystems
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Subsystems
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    nos.sys.vulkan
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    nos.sys.vulkan
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#minimal-example" class="md-nav__link">
    <span class="md-ellipsis">
      Minimal example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shaders" class="md-nav__link">
    <span class="md-ellipsis">
      Shaders
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Shaders">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compiling-registering" class="md-nav__link">
    <span class="md-ellipsis">
      Compiling &amp; Registering
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compiling & Registering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shader-only-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Shader Only Nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registering-a-shader-or-a-gpu-pass" class="md-nav__link">
    <span class="md-ellipsis">
      Registering a shader or a GPU pass
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    <span class="md-ellipsis">
      Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nosresourcetype" class="md-nav__link">
    <span class="md-ellipsis">
      nosResourceType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nosresourceinfo" class="md-nav__link">
    <span class="md-ellipsis">
      nosResourceInfo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#begin" class="md-nav__link">
    <span class="md-ellipsis">
      Begin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#end" class="md-nav__link">
    <span class="md-ellipsis">
      End
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#end2" class="md-nav__link">
    <span class="md-ellipsis">
      End2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#waitgpuevent" class="md-nav__link">
    <span class="md-ellipsis">
      WaitGpuEvent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../process/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Applications
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../usages/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Using Nodos
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Using Nodos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../usages/ai_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AI Models
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#minimal-example" class="md-nav__link">
    <span class="md-ellipsis">
      Minimal example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shaders" class="md-nav__link">
    <span class="md-ellipsis">
      Shaders
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Shaders">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compiling-registering" class="md-nav__link">
    <span class="md-ellipsis">
      Compiling &amp; Registering
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compiling & Registering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shader-only-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Shader Only Nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registering-a-shader-or-a-gpu-pass" class="md-nav__link">
    <span class="md-ellipsis">
      Registering a shader or a GPU pass
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    <span class="md-ellipsis">
      Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nosresourcetype" class="md-nav__link">
    <span class="md-ellipsis">
      nosResourceType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nosresourceinfo" class="md-nav__link">
    <span class="md-ellipsis">
      nosResourceInfo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#begin" class="md-nav__link">
    <span class="md-ellipsis">
      Begin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#end" class="md-nav__link">
    <span class="md-ellipsis">
      End
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#end2" class="md-nav__link">
    <span class="md-ellipsis">
      End2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#waitgpuevent" class="md-nav__link">
    <span class="md-ellipsis">
      WaitGpuEvent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="vulkan-subsystem">Vulkan Subsystem</h1>
<p>Subsystem <code>nos.sys.vulkan</code> features an API for plugins to communicate with vulkan &amp; send commands to the GPU.</p>
<h2 id="minimal-example">Minimal example</h2>
<p>For a plugin or a subsystem, to define a dependency to nosVulkan, add the <code>nos.sys.vulkan</code> dependency in the noscfg file as shown in <code>Test.noscfg</code>. Then in the file that contains the <code>NOS_INIT</code> macro, include <code>&lt;nosVulkanSubsystem/nosVulkanSubsystem.h&gt;</code> for <code>nos.sys.vulkan</code> API, then in the <code>nosExportNodeFunctions</code> function request the Vulkan subsystem using <code>nosEngine.RequestSubsystem</code> function. Then <code>nosVulkan</code> global variable can be used anywhere to communicate with the <code>nos.sys.vulkan</code> API. <code>&lt;nosVulkanSubsystem/Helpers.hpp&gt;</code> contains helper functions and <code>&lt;nosVulkanSubsystem/Types_generated.h&gt;</code> contains flatbuffers headers for Texture.</p>
<div class="language-json highlight"><span class="filename">Test.noscfg</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="p">{</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="nt">&quot;info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nos.test&quot;</span><span class="p">,</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">            </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">        </span><span class="p">},</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">        </span><span class="nt">&quot;display_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Test&quot;</span><span class="p">,</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Test plugin.&quot;</span><span class="p">,</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">        </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">                </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nos.sys.vulkan&quot;</span><span class="p">,</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">                </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">        </span><span class="p">]</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">    </span><span class="nt">&quot;node_definitions&quot;</span><span class="p">:</span><span class="err">...</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="p">}</span>
</span></code></pre></div>
<div class="language-cpp highlight"><span class="filename">Test.cpp</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Nodos/PluginAPI.h&gt;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;nosVulkanSubsystem/nosVulkanSubsystem.h&gt;</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;nosVulkanSubsystem/Helpers.hpp&gt;</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="n">NOS_INIT</span><span class="p">();</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="n">nosVulkanSubsystem</span><span class="o">*</span><span class="w"> </span><span class="err">`</span><span class="n">nos</span><span class="p">.</span><span class="n">sys</span><span class="p">.</span><span class="n">vulkan</span><span class="err">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span><span class="c1">//`nos.sys.vulkan` is a variable that is declared as extern in nosVulkanSubsystem.h</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="p">{</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="n">NOSAPI_ATTR</span><span class="w"> </span><span class="n">nosResult</span><span class="w"> </span><span class="n">NOSAPI_CALL</span><span class="w"> </span><span class="n">nosExportNodeFunctions</span><span class="p">(</span><span class="kt">size_t</span><span class="o">*</span><span class="w"> </span><span class="n">outCount</span><span class="p">,</span><span class="w"> </span><span class="n">nosNodeFunctions</span><span class="o">**</span><span class="w"> </span><span class="n">outFunctions</span><span class="p">)</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">        </span><span class="o">*</span><span class="n">outCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="p">)(</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">outFunctions</span><span class="p">)</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">NOS_RESULT_SUCCESS</span><span class="p">;</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nosEngine</span><span class="p">.</span><span class="n">RequestSubsystem</span><span class="p">(</span><span class="n">NOS_NAME_STATIC</span><span class="p">(</span><span class="n">NOS_VULKAN_SUBSYSTEM_NAME</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="o">**</span><span class="p">)</span><span class="o">&amp;</span><span class="n">nosVulkan</span><span class="p">);</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">        </span><span class="c1">//System might not have nosVulkanSubsystem with the requested version, so be sure to check for it.</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">NOS_RESULT_SUCCESS</span><span class="p">)</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">        </span><span class="c1">//Register nodes etc...</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">        </span><span class="n">outFunctions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">ClassName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NOS_NAME_STATIC</span><span class="p">(</span><span class="s">&quot;nos.test.CopyTestLicensed&quot;</span><span class="p">);</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">        </span><span class="n">outFunctions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">ExecuteNode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">ctx</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">nosNodeExecuteArgs</span><span class="o">*</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">            </span><span class="n">nosCmd</span><span class="w"> </span><span class="n">cmd</span><span class="p">;</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">            </span><span class="n">nosVulkan</span><span class="o">-&gt;</span><span class="n">Begin</span><span class="p">(</span><span class="s">&quot;(nos.test.CopyTest) Copy&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cmd</span><span class="p">);</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nos</span><span class="o">::</span><span class="n">GetPinValues</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="w">            </span><span class="n">nosResourceShareInfo</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nos</span><span class="o">::</span><span class="n">vkss</span><span class="o">::</span><span class="n">DeserializeTextureInfo</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">NOS_NAME_STATIC</span><span class="p">(</span><span class="s">&quot;Input&quot;</span><span class="p">)]);</span>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="w">            </span><span class="n">nosResourceShareInfo</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nos</span><span class="o">::</span><span class="n">vkss</span><span class="o">::</span><span class="n">DeserializeTextureInfo</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">NOS_NAME_STATIC</span><span class="p">(</span><span class="s">&quot;Output&quot;</span><span class="p">)]);</span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="w">            </span><span class="n">nosVulkan</span><span class="o">-&gt;</span><span class="n">Copy</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="w">            </span><span class="n">nosVulkan</span><span class="o">-&gt;</span><span class="n">End</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="w"> </span><span class="n">NOS_FALSE</span><span class="p">);</span>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">NOS_RESULT_SUCCESS</span><span class="p">;</span>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">NOS_RESULT_SUCCESS</span><span class="p">;</span>
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a><span class="p">}</span>
</span></code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Don't forget to check for the availability of the subsystem. Since the subsystem may not be available.</p>
</div>
<h2 id="shaders">Shaders</h2>
<h3 id="compiling-registering">Compiling &amp; Registering</h3>
<p>There are 2 ways of compiling and registering a shader. One is by defining it in a Shader Only Node and another is by registering it in <code>registerXXX()</code> calls.
To be able to execute shaders, a related <code>ShaderPass</code> should be created. Compute shaders should create <code>ComputePass</code>, fragment and vertex shader should create <code>RenderPass</code>. A <code>RenderPass</code> has to have a fragment shader but vertex shader is optional (if not specified, full quad vertex shader is used).</p>
<h4 id="shader-only-nodes">Shader Only Nodes</h4>
<p>To add a shader only node(such as <code>Color Correct</code>), add the node to plugin's noscfg and create a nosdef for the node. In the nosdef, add pins and other fields as if the node is a regular node. Then, in the node definition, fill the <code class="language-json highlight"><span class="err">&quot;contents</span></code> field as shown in the example. The path given in <code class="language-json highlight"><span class="err">shader</span></code> field is relative to the plugin's noscfg file. If the file extension doesn't end with <code>.spv</code>, <code>nos.sys.vulkan</code> tries to compile the given file using glslc and dxc, whichever compiles. Shader only nodes do not need a .dll file and the plugin doesn't need to export their node functions.
<div class="language-json highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="p">{</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">            </span><span class="nt">&quot;class_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ColorCorrect&quot;</span><span class="p">,</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">            </span><span class="nt">&quot;contents_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Job&quot;</span><span class="p">,</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">            </span><span class="nt">&quot;contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nos.sys.vulkan.GPUNode&quot;</span><span class="p">,</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">                </span><span class="nt">&quot;options&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">                    </span><span class="nt">&quot;shader&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;../Shaders/ColorCorrect.hlsl&quot;</span><span class="p">,</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">                    </span><span class="nt">&quot;stage&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FRAGMENT&quot;</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">            </span><span class="p">},</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">            </span><span class="nt">&quot;pins&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">    </span><span class="p">]</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="p">}</span>
</span></code></pre></div></p>
<h4 id="registering-a-shader-or-a-gpu-pass">Registering a shader or a GPU pass</h4>
<p>To compile a shader, caller should provide either human-readable (either HLSL or GLSL) source file path, human-readable source file text, SPIR-V blob file path or SPIR-V blob data to <code>ShaderInfo2.Source</code>.
To create a pass, a globally unique <code>PassName</code> and shaders should be provided. To create a RenderPass, fragment shader should be passed to <code>nosPassInfo.Shader</code> and vertex shader (optional) should be passed to <code>nosPassInfo.VertexShader</code>.</p>
<h2 id="types">Types</h2>
<h3 id="nosresourcetype">nosResourceType</h3>
<p><div class="language-cpp highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">enum</span><span class="w"> </span><span class="nc">nosResourceType</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="p">{</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="n">NOS_RESOURCE_TYPE_BUFFER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="n">NOS_RESOURCE_TYPE_TEXTURE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="p">}</span>
</span></code></pre></div>
Refer to <a href="">nosResourceShareInfo</a>.</p>
<h3 id="nosresourceinfo">nosResourceInfo</h3>
<p><div class="language-cpp highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">nosResourceInfo</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="p">{</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="n">nosResourceType</span><span class="w"> </span><span class="n">Type</span><span class="p">;</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="k">union</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">        </span><span class="n">nosTextureInfo</span><span class="w"> </span><span class="n">Texture</span><span class="p">;</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">        </span><span class="n">nosBufferInfo</span><span class="w"> </span><span class="n">Buffer</span><span class="p">;</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="p">};</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="p">};</span>
</span></code></pre></div>
<code class="language-c highlight"><span class="n">Type</span></code> must be set to adequate <code class="language-c highlight"><span class="n">nosResourceType</span></code> based on which resource info is used.</p>
<h2 id="functions">Functions</h2>
<p>Most operations in <code>nos.sys.vulkan</code> API uses a <code>nosCmd</code> struct to record commands and most calls are not synchronized between CPU and GPU.</p>
<hr />
<h3 id="begin">Begin</h3>
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="n">Begin</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">nosCmd</span><span class="o">*</span><span class="w"> </span><span class="n">outCmd</span><span class="p">)</span></code><br>
Parameters:<br>
<code>name</code>: Debug name for the commands that will be recorded using this cmd.<br>
<code>outCmd</code>: Filled with the handle for a command buffer that can be used with other calls.</p>
<hr />
<h3 id="end">End</h3>
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">End</span><span class="p">(</span><span class="n">nosCmd</span><span class="w"> </span><span class="n">cmd</span><span class="p">,</span><span class="w"> </span><span class="n">nosBool</span><span class="w"> </span><span class="n">forceSubmit</span><span class="p">);</span></code><br>
Marks the end of command buffer's use.<br>
Parameters:<br>
<code>forceSubmit</code>: Submits the command buffer to the GPU. Recorded commands are not executed until the command buffer is submitted to the GPU, regular nodes in the node path can get away with not submitting the command buffer. Nodes that communicate between the CPU and the GPU or other graphics API's needs to submit the command buffer in appopriate points. Mind that submitting the command buffer has a significant performance hit. This does not wait for the GPU, refer to <a href="#end2">End2</a>. Command buffers used outside of the Scheduler thread are submitted even if this parameter is false. </p>
<hr />
<h3 id="end2">End2</h3>
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">End2</span><span class="p">(</span><span class="n">nosCmd</span><span class="w"> </span><span class="n">cmd</span><span class="p">,</span><span class="w"> </span><span class="n">nosBool</span><span class="w"> </span><span class="n">forceSubmit</span><span class="p">,</span><span class="w"> </span><span class="n">nosGPUEvent</span><span class="o">*</span><span class="w"> </span><span class="n">outEventHandle</span><span class="p">);</span></code>
Marks the end of command buffer's use.<br>
Parameters:<br>
<code>forceSubmit</code>: Submits the command buffer to the GPU. Command buffers used outside of the Scheduler thread are submitted even if this parameter is false. Refer to <a href="#end">End</a> for more detailed information.<br>
<code>outEventHandle</code>: If not null, fills the value with an event that will be signalled when the GPU completes execution of the commands in the command buffer. Mind that this does not submits the command buffer to GPU unless <code>forceSubmit</code> is <code>true</code>, waiting it before the command buffer is submitted will result in a timeout or deadlock. Returned event must be waited at some point using <a href="#waitgpuevent">WaitGpuEvent</a>, unless the event results in a leak.</p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">Copy</span><span class="p">(</span><span class="n">nosCmd</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">nosResourceShareInfo</span><span class="o">*</span><span class="w"> </span><span class="n">src</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">nosResourceShareInfo</span><span class="o">*</span><span class="w"> </span><span class="n">dst</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">benchmark</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">RunPass</span><span class="p">(</span><span class="n">nosCmd</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">nosRunPassParams</span><span class="o">*</span><span class="w"> </span><span class="n">params</span><span class="p">);</span></code><br></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">RunPass2</span><span class="p">(</span><span class="n">nosCmd</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">nosRunPass2Params</span><span class="o">*</span><span class="w"> </span><span class="n">params</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">RunComputePass</span><span class="p">(</span><span class="n">nosCmd</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">nosRunComputePassParams</span><span class="o">*</span><span class="w"> </span><span class="n">params</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">Clear</span><span class="p">(</span><span class="n">nosCmd</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">nosResourceShareInfo</span><span class="o">*</span><span class="w"> </span><span class="n">texture</span><span class="p">,</span><span class="w"> </span><span class="n">nosVec4</span><span class="w"> </span><span class="n">color</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">Download</span><span class="p">(</span><span class="n">nosCmd</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">nosResourceShareInfo</span><span class="o">*</span><span class="w"> </span><span class="n">texture</span><span class="p">,</span><span class="w"> </span><span class="n">nosResourceShareInfo</span><span class="o">*</span><span class="w"> </span><span class="n">outBuffer</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">ImageLoad</span><span class="p">(</span><span class="n">nosCmd</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">nosVec2u</span><span class="w"> </span><span class="n">extent</span><span class="p">,</span><span class="w"> </span><span class="n">nosFormat</span><span class="w"> </span><span class="n">format</span><span class="p">,</span><span class="w"> </span><span class="n">nosResourceShareInfo</span><span class="o">*</span><span class="w"> </span><span class="n">inOut</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">CreateResource</span><span class="p">(</span><span class="n">nosResourceShareInfo</span><span class="o">*</span><span class="w"> </span><span class="n">inout</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">ImportResource</span><span class="p">(</span><span class="n">nosResourceShareInfo</span><span class="o">*</span><span class="w"> </span><span class="n">inout</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">DestroyResource</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">nosResourceShareInfo</span><span class="o">*</span><span class="w"> </span><span class="n">resource</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">ReloadShaders</span><span class="p">(</span><span class="n">nosName</span><span class="w"> </span><span class="n">nodeName</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="kt">uint8_t</span><span class="o">*</span><span class="w"> </span><span class="nf">Map</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">nosResourceShareInfo</span><span class="o">*</span><span class="w"> </span><span class="n">buffer</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">GetColorTexture</span><span class="p">(</span><span class="n">nosVec4</span><span class="w"> </span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="n">nosResourceShareInfo</span><span class="o">*</span><span class="w"> </span><span class="n">out</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">GetStockTexture</span><span class="p">(</span><span class="n">nosResourceShareInfo</span><span class="o">*</span><span class="w"> </span><span class="n">out</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">CreateSemaphore</span><span class="p">(</span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">pid</span><span class="p">,</span><span class="w"> </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">externalOSHandle</span><span class="p">,</span><span class="w"> </span><span class="n">nosSemaphore</span><span class="o">*</span><span class="w"> </span><span class="n">outSemaphore</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">DestroySemaphore</span><span class="p">(</span><span class="n">nosSemaphore</span><span class="w"> </span><span class="n">semaphore</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">AddSignalSemaphoreToCmd</span><span class="p">(</span><span class="n">nosCmd</span><span class="w"> </span><span class="n">cmd</span><span class="p">,</span><span class="w"> </span><span class="n">nosSemaphore</span><span class="w"> </span><span class="n">semaphore</span><span class="p">,</span><span class="w"> </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">signalValue</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">AddWaitSemaphoreToCmd</span><span class="p">(</span><span class="n">nosCmd</span><span class="w"> </span><span class="n">cmd</span><span class="p">,</span><span class="w"> </span><span class="n">nosSemaphore</span><span class="w"> </span><span class="n">semaphore</span><span class="p">,</span><span class="w"> </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">waitValue</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">SignalSemaphore</span><span class="p">(</span><span class="n">nosSemaphore</span><span class="w"> </span><span class="n">semaphore</span><span class="p">,</span><span class="w"> </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">value</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">RegisterShaders</span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">count</span><span class="p">,</span><span class="w"> </span><span class="n">nosShaderInfo</span><span class="o">*</span><span class="w"> </span><span class="n">shaders</span><span class="p">);</span></code></p>
<hr />
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">RegisterPasses</span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">count</span><span class="p">,</span><span class="w"> </span><span class="n">nosPassInfo</span><span class="o">*</span><span class="w"> </span><span class="n">passInfos</span><span class="p">);</span></code></p>
<hr />
<h3 id="waitgpuevent">WaitGpuEvent</h3>
<p><code class="language-c highlight"><span class="n">nosResult</span><span class="w"> </span><span class="nf">WaitGpuEvent</span><span class="p">(</span><span class="n">nosGPUEvent</span><span class="o">*</span><span class="w"> </span><span class="n">eventHandle</span><span class="p">,</span><span class="w"> </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">timeoutNs</span><span class="p">);</span></code><br>
Waits for the gpu to complete the work until the given event or timeout, then deletes the event.
Parameters:<br>
<code>eventHandle</code>: Event handle to wait, will be set to null afterwards.<br>
<code>timeoutNs</code>: Timeout in nanoseconds, pass UINT64_T for max and 0 for deleting the event without any wait.<br></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "content.code.select", "navigation.indexes"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>